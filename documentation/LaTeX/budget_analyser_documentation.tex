\documentclass[11pt,a4paper]{report}

% Packages
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage{graphicx}
\usepackage{xcolor}
\usepackage{hyperref}
\usepackage{listings}
\usepackage{booktabs}
\usepackage{geometry}
\usepackage{titlesec}
\usepackage{fancyhdr}
\usepackage{tcolorbox}
\usepackage{enumitem}

% Page setup
\geometry{a4paper, margin=1in}

% Colors
\definecolor{primary}{RGB}{114, 137, 218}
\definecolor{secondary}{RGB}{44, 47, 51}
\definecolor{background}{RGB}{30, 30, 30}
\definecolor{text}{RGB}{255, 255, 255}
\definecolor{codebackground}{RGB}{44, 47, 51}
\definecolor{codecomment}{RGB}{106, 153, 85}
\definecolor{codestring}{RGB}{206, 145, 120}
\definecolor{codekeyword}{RGB}{86, 156, 214}

% Hyperref setup
\hypersetup{
    colorlinks=true,
    linkcolor=primary,
    filecolor=primary,
    urlcolor=primary,
    citecolor=primary
}

% Code listing setup
\lstset{
    backgroundcolor=\color{codebackground},
    basicstyle=\footnotesize\ttfamily\color{text},
    breakatwhitespace=false,
    breaklines=true,
    captionpos=b,
    commentstyle=\color{codecomment},
    extendedchars=true,
    frame=single,
    keepspaces=true,
    keywordstyle=\color{codekeyword},
    language=Python,
    numbers=left,
    numbersep=5pt,
    numberstyle=\tiny\color{text},
    rulecolor=\color{black},
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    stepnumber=1,
    stringstyle=\color{codestring},
    tabsize=4,
    title=\lstname
}

% Header and footer
\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{Budget Analyser}
\fancyhead[R]{\thepage}
\fancyfoot[C]{Budget Analyser Documentation}

% Title format
\titleformat{\chapter}[display]
{\normalfont\huge\bfseries\color{primary}}
{\chaptertitlename\ \thechapter}{20pt}{\Huge}
\titlespacing*{\chapter}{0pt}{50pt}{40pt}

% Document info
\title{
    \vspace{1cm}
    {\Huge\bfseries Budget Analyser}\\
    \vspace{0.5cm}
    {\large\textit{Comprehensive Documentation}}\\
    \vspace{2cm}
}
\author{Budget Analyser Team}
\date{\today}

\begin{document}

\begin{titlepage}
    \maketitle
    \begin{center}
        \vfill
        \begin{tcolorbox}[colback=primary!10,colframe=primary,width=0.8\textwidth]
            \centering
            \large This document provides comprehensive documentation for the Budget Analyser application, including its architecture, components, functionality, and usage instructions.
        \end{tcolorbox}
        \vfill
        \textbf{Version 1.0}\\
        \today
    \end{center}
\end{titlepage}

\tableofcontents

\chapter{Introduction}

\section{Overview}
Budget Analyser is a cross\-platform desktop application built with PySide6 (Qt for Python) and pandas. It helps users analyse and review financial data by processing bank account statements. The app categorises transactions using JSON keyword mappings, generates month\-wise reports, and presents them in a modern, theme\-aware GUI. A strict separation is maintained between UI (Views), data shaping (Controllers), and domain logic.

\section{Current Implementation (SRC layout)}
\label{sec:current-implementation}

The project follows a layered architecture with one behaviour class per file under a \texttt{src/} layout.

\subsection*{Directory overview}
\begin{itemize}[leftmargin=*]
  \item \textbf{src/budget\_analyser/presentation/views}: PySide6 widgets only (no business logic). Contains the login window, dashboard shell, and page widgets.
  \item \textbf{src/budget\_analyser/presentation/controller}: Pure\-Python controllers that transform domain data into view\-friendly structures (DTOs). No Qt code here.
  \item \textbf{src/budget\_analyser/domain}: Statement formatters, transaction processor, and reporting services (pure domain logic).
  \item \textbf{src/budget\_analyser/infrastructure}: INI config adapter, CSV repository, and JSON mappings provider/store.
  \item \textbf{resources/}: Sample statements and JSON mapping files.
  \item \textbf{tests/}: Pytest unit tests covering core domain and controllers.
\end{itemize}

\subsection*{Composition root}
The GUI entrypoint is the package module:
\begin{verbatim}
python -m budget_analyser
\end{verbatim}
This calls \texttt{presentation/views/app\_gui.py}, which:
\begin{enumerate}[leftmargin=*]
  \item Configures rotating file logging in a per\-user directory.
  \item Applies the persisted UI theme and a platform\-available font.
  \item Builds the backend controller with infrastructure adapters.
  \item Shows the fullscreen Login; on success, computes reports and opens the Dashboard.
\end{enumerate}

\section{Presentation: Views vs Controllers}
Views (QWidgets) contain only UI code. All data preparation lives in controllers:
\begin{itemize}[leftmargin=*]
  \item \textbf{YearlySummaryStatsController}: aggregates totals per year and builds Category\,$\rightarrow$\,Sub\-category trees; exposes month names (January..December).
  \item \textbf{EarningsStatsController}: per\-month totals and sub\-category breakdown; provides filtered transactions for the table.
  \item \textbf{ExpensesStatsController}: per\-month expenses with hierarchy Category\,$\rightarrow$\,Sub\-category; filtered transactions.
  \item \textbf{PaymentsReconciliationController}: compares \emph{payments\_made} vs \emph{payment\_confirmations} per month (excluded from standard aggregates).
  \item \textbf{MapperController}: lists unmapped transactions (Date, Description, Amount) and applies mapping edits; persists via JSON store.
  \item \textbf{SettingsController}: changes log level and password; applies log level immediately.
\end{itemize}

\section{Dashboard pages}
The Dashboard contains a menubar (File \,$\rightarrow$\, Exit), a header with a section subtitle, a left navigation, and a stacked content area.
\begin{itemize}[leftmargin=*]
  \item \textbf{Yearly Summary}: two cards with totals (Earned/Spent) and trees (Category \,$\rightarrow$\, Sub\-category) for the selected year, plus a 12\-month table.
  \item \textbf{Earnings}: month selector; tree (Total \,$\rightarrow$\, Sub\-categories); bottom table bound to current selection.
  \item \textbf{Expenses}: month selector; hierarchy Expenses \,$\rightarrow$\, Category \,$\rightarrow$\, Sub\-category; bottom table bound to selection.
  \item \textbf{Payments}: reconciliation view that lists both \emph{payments\_made} and \emph{payment\_confirmations} with totals and difference.
  \item \textbf{Mapper}: filterable table of unmapped transactions showing Date, Description, and Amount; supports adding to existing sub\-categories or creating new ones.
  \item \textbf{Settings}: update password and logging level; theme toggle also available in Login and header.
\end{itemize}

\section{Domain logic}
The \textbf{ReportService} enforces sign normalisation: earnings are positive, expenses negative. The \textbf{TransactionProcessor} derives \texttt{sub\_category}, \texttt{category}, and \texttt{c\_or\_d} using keyword mappings loaded from JSON. Statement formatters convert heterogeneous CSVs to a canonical schema.

\section{Logging and diagnostics}
Rotating file logs (5MB, 3 backups) are written to a per\-user directory (override via \texttt{BUDGET\_ANALYSER\_LOG\_DIR}). The pipeline logs start/end, shapes/columns per account at DEBUG, and rich context on failures. Mapping providers log file paths and key counts.

\section{Platform independence}
The app selects an available system font at runtime and avoids platform\-specific shortcuts by using Qt standard keys (Quit). Paths are handled via \texttt{pathlib}. CSV reading is tolerant, and case differences in filenames are tested.

\section{Continuous integration}
Unit tests run on GitHub Actions across Linux/macOS/Windows and Python 3.10\,--\,3.12. The workflow sets \texttt{PYTHONPATH=src} and \texttt{QT\_QPA\_PLATFORM=offscreen} for headless environments. See \texttt{.github/workflows/tests.yml}.

\section{Purpose}
The primary purpose of the Budget Analyser is to:
\begin{itemize}
    \item Process and analyze bank account statements
    \item Categorize financial transactions automatically
    \item Generate detailed reports on earnings and expenses
    \item Provide insights into spending patterns and financial trends
    \item Help users make informed financial decisions
\end{itemize}

\section{Target Audience}
The Budget Analyser is designed for:
\begin{itemize}
    \item Individual users who want to track their personal finances
    \item Small business owners who need to monitor business expenses
    \item Financial advisors who assist clients with financial planning
    \item Anyone interested in gaining better insights into their financial data
\end{itemize}

\chapter{System Architecture}

\section{Overview}
The Budget Analyser application follows a layered architecture pattern, specifically implementing the Model-View-Controller (MVC) design pattern with additional framework utilities. This architecture separates the application into distinct components, each with specific responsibilities, making the system more maintainable, extensible, and testable.

\section{Architectural Layers}

\subsection{View Layer}
The View layer is responsible for the user interface components and user interaction. It includes:
\begin{itemize}
    \item \textbf{Ui\_Widget}: The login screen UI
    \item \textbf{Ui\_MainWindow}: The main dashboard UI
    \item \textbf{InputDisplayApp} and \textbf{ExpenseReport}: Test UI components
\end{itemize}

\subsection{Model Layer}
The Model layer is responsible for data management and business logic. It includes:
\begin{itemize}
    \item \textbf{Statements}: Collects and formats financial transaction data
    \item \textbf{OriginalStatement}: Provides raw transaction data
    \item \textbf{StatementFormatter}: Formats raw statements into a consistent format
\end{itemize}

\subsection{Controller Layer}
The Controller layer acts as an intermediary between the View and Model layers, processing user input and updating the model and view accordingly. It includes:
\begin{itemize}
    \item \textbf{Report}: Generates various financial reports from transaction data
    \item \textbf{Processor}: Processes raw transactions by adding categorization
\end{itemize}

\subsection{Framework Layer}
The Framework layer provides utility classes and services used by the other layers. It includes:
\begin{itemize}
    \item \textbf{Logger}: Provides centralized logging (implemented as a Singleton)
    \item \textbf{PandasToolkit}: Utility methods for pandas DataFrame operations
    \item \textbf{JsonHandler}: Handles JSON file loading and parsing
\end{itemize}

\section{Component Relationships}
The main application flow starts in \texttt{main\_be.py}, which creates instances of \texttt{Statements}, \texttt{Processor}, and \texttt{Report} to process financial data and generate reports. The relationships between components are as follows:

\begin{itemize}
    \item \textbf{main\_be} creates instances of \textbf{Statements}, \textbf{Processor}, and \textbf{Report}
    \item \textbf{Ui\_Widget} opens the dashboard (\textbf{Ui\_MainWindow})
    \item \textbf{Statements} uses \textbf{OriginalStatement} and \textbf{StatementFormatter}
    \item \textbf{Statements}, \textbf{Processor}, and \textbf{Report} use \textbf{PandasToolkit} for data operations
    \item \textbf{Statements} and \textbf{Processor} use \textbf{Logger} for logging
    \item \textbf{Processor} uses \textbf{JsonHandler} for mapping
    \item \textbf{InputDisplayApp} creates \textbf{ExpenseReport}
\end{itemize}

These static relationships are complemented by sequence diagrams in Appendix A, which illustrate the dynamic interactions between components over time. The data processing sequence diagram shows how data flows through the system during transaction processing, while the UI flow sequence diagram illustrates how the user interacts with the application's interface components.

\chapter{Components}

\section{View Components}

\subsection{Login Screen (Ui\_Widget)}
The login screen is the entry point of the application's user interface. It provides:
\begin{itemize}
    \item A password-based authentication system
    \item A modern, dark-themed interface with visual elements
    \item Access to the main dashboard upon successful authentication
\end{itemize}

\subsection{Dashboard (Ui\_MainWindow)}
The dashboard is the main interface of the application after login. It features:
\begin{itemize}
    \item A sidebar with navigation buttons (Home, Earnings, Expenses, Upload, Mapper, Settings, Logout)
    \item A toggle between icon-only and full-name views for the sidebar
    \item A month selector for filtering data by time period
    \item Different pages for different functions (Home, Earnings, Expenses, Settings)
    \item Tables for displaying financial data
\end{itemize}

\section{Model Components}

\subsection{Statements}
The \texttt{Statements} class is responsible for collecting and managing transaction data. It:
\begin{itemize}
    \item Uses \texttt{OriginalStatement} to get raw transaction data
    \item Uses \texttt{StatementFormatter} to format the data consistently
    \item Provides a unified view of transactions from different sources
\end{itemize}

\subsection{OriginalStatement}
The \texttt{OriginalStatement} class provides access to raw transaction data from different sources:
\begin{itemize}
    \item Credit card statements
    \item Checking account statements
\end{itemize}

\subsection{StatementFormatter}
The \texttt{StatementFormatter} class is responsible for converting raw statement data into a consistent format that can be processed by the application.

\section{Controller Components}

\subsection{Report}
The \texttt{Report} class generates various financial reports based on transaction data:
\begin{itemize}
    \item Earnings reports
    \item Expenses reports
    \item Category-based expense reports
    \item Sub-category-based expense reports
\end{itemize}

\subsection{Processor}
The \texttt{Processor} class enhances raw transaction data with additional information:
\begin{itemize}
    \item Adds category information to transactions
    \item Adds sub-category information to transactions
    \item Identifies transactions as credits or debits
    \item Uses mapping data from JSON files for categorization
\end{itemize}

\section{Framework Components}

\subsection{Logger}
The \texttt{Logger} class provides centralized logging functionality:
\begin{itemize}
    \item Implemented as a Singleton to ensure a single logging instance
    \item Supports different log levels (debug, info, error, critical, exception)
    \item Provides special logging for tabular data
\end{itemize}

\subsection{PandasToolkit}
The \texttt{PandasToolkit} class provides utility methods for working with pandas DataFrames:
\begin{itemize}
    \item Filtering rows based on conditions
    \item Adding columns with derived data
    \item Concatenating DataFrames
\end{itemize}

\subsection{JsonHandler}
The \texttt{JsonHandler} class provides functionality for working with JSON files:
\begin{itemize}
    \item Loading JSON data from files
    \item Parsing JSON data into Python objects
\end{itemize}

\chapter{Functionality}

\section{Data Processing Flow}
The main data processing flow in the Budget Analyser application is as follows:

\begin{enumerate}
    \item Raw transaction data is collected from various sources (credit cards, checking accounts) by the \texttt{OriginalStatement} class.
    \item The raw data is formatted into a consistent structure by the \texttt{StatementFormatter} class.
    \item The formatted data is collected and managed by the \texttt{Statements} class.
    \item The \texttt{Processor} class enhances the transaction data with categories and other information.
    \item The processed data is grouped by month for analysis.
    \item The \texttt{Report} class generates various reports based on the processed data.
    \item The reports are displayed to the user through the UI or logged for later reference.
\end{enumerate}

This data processing flow is visually represented in the Data Processing Flow sequence diagram in Appendix A. The sequence diagram illustrates the interactions between components and the flow of data through the system, providing a clear visual representation of the process described above.

\section{User Interface Flow}
The user interface flow in the Budget Analyser application is as follows:

\begin{enumerate}
    \item The user starts the application and is presented with the login screen (\texttt{Ui\_Widget}).
    \item After entering the correct password, the user is taken to the dashboard (\texttt{Ui\_MainWindow}).
    \item The dashboard provides access to different sections of the application through the sidebar navigation.
    \item The user can select a specific month to view data for that time period.
    \item The user can view different types of reports (earnings, expenses, etc.) by navigating to the corresponding pages.
    \item The user can upload new statement data, map transactions to categories, adjust settings, or log out using the sidebar options.
\end{enumerate}

This user interface flow is visually represented in the UI Flow sequence diagram in Appendix A. The sequence diagram illustrates the interactions between the user and the application's interface components, showing how the user navigates through the application and how the different UI components respond to user actions.

\section{Key Features}

\subsection{Transaction Categorization}
The Budget Analyser automatically categorizes transactions based on predefined rules and mappings, helping users understand where their money is going.

\subsection{Financial Reporting}
The application generates various financial reports, including:
\begin{itemize}
    \item Earnings reports showing sources of income
    \item Expense reports showing where money is being spent
    \item Category-based reports showing spending by category
    \item Sub-category-based reports showing detailed spending patterns
\end{itemize}

\subsection{Time-Based Analysis}
The application groups data by month, allowing users to analyze their financial patterns over time and identify trends or anomalies.

\subsection{User-Friendly Interface}
The application features a modern, intuitive user interface with:
\begin{itemize}
    \item A dark theme for reduced eye strain
    \item Clear navigation options
    \item Responsive design elements
    \item Tabular data presentation for easy comprehension
\end{itemize}

\chapter{Installation and Setup}

\section{Prerequisites}
Before installing the Budget Analyser, ensure you have the following prerequisites:

\begin{itemize}
    \item Python 3.9 or higher
    \item pip (Python package installer)
    \item Required Python packages (listed in requirements.txt)
\end{itemize}

\section{Installation Steps}

\begin{enumerate}
    \item Clone the repository:
    \begin{lstlisting}
    git clone https://github.com/username/Analyser.git
    cd Analyser
    \end{lstlisting}
    
    \item Install the required dependencies:
    \begin{lstlisting}
    pip install -r requirements.txt
    \end{lstlisting}
    
    \item Set up any necessary configuration files (if applicable).
\end{enumerate}

\section{Running the Application}

To launch the GUI application using the current SRC layout and composition root:

\begin{lstlisting}
python -m budget_analyser
\end{lstlisting}

After launch:
\begin{itemize}
    \item Log in with the default password \texttt{123456} (unless changed in Settings).
    \item Use the theme toggle on Login or Dashboard to switch light/dark themes. The preference persists.
    \item Navigate using the left sidebar: Yearly Summary, Earnings, Expenses, Payments, Mapper, Settings, Upload.
\end{itemize}

\chapter{Usage Guide}

\section{Logging In}
To log in to the Budget Analyser:

\begin{enumerate}
    \item Launch the application.
    \item Enter the password in the password field (default: \texttt{123456}).
    \item Click the "Login" button.
\end{enumerate}

\section{Navigating the Dashboard}
The dashboard provides several navigation options:

\begin{itemize}
    \item \textbf{Home}: View the main dashboard overview.
    \item \textbf{Earnings}: View reports on income sources.
    \item \textbf{Expenses}: View reports on spending.
    \item \textbf{Upload}: Upload new statement data.
    \item \textbf{Mapper}: Configure transaction categorization rules.
    \item \textbf{Settings}: Adjust application settings.
    \item \textbf{Logout}: Exit the application.
\end{itemize}

\section{Viewing Reports}
To view financial reports:

\begin{enumerate}
    \item Navigate to the desired report section (Earnings, Expenses, etc.).
    \item Select the desired month from the month selector.
    \item Review the tabular data presented in the report.
\end{enumerate}

\section{Uploading Statements}
To upload new statement data:

\begin{enumerate}
    \item Navigate to the Upload section.
    \item Follow the prompts to select and upload statement files.
    \item The application will process the new data and update the reports.
\end{enumerate}

\chapter{Development Guide}

\section{Project Structure}
The Budget Analyser project uses a SRC layout with clear package boundaries:

\begin{itemize}
    \item \textbf{src/budget\_analyser/}: Application packages
        \begin{itemize}
            \item \textbf{presentation/views}: Qt windows and pages (LoginWindow, DashboardWindow, pages)
            \item \textbf{presentation/controller}: Pure-Python controllers for each page
            \item \textbf{domain}: Statement formatters, transaction processing, reporting
            \item \textbf{infrastructure}: INI/JSON adapters and CSV repository
        \end{itemize}
    \item \textbf{config/}: Application configuration (\texttt{budget\_analyser.ini})
    \item \textbf{resources/mappers/}: JSON keyword mappings
    \item \textbf{tests/}: Pytest unit tests
    \item \textbf{documentation/}: LaTeX manual and UML diagrams
    \item \textbf{scripts/}: Helper scripts (documentation and README update)
\end{itemize}

\section{Adding New Features}
When adding new features to the Budget Analyser, follow these guidelines:

\begin{enumerate}
    \item Identify the appropriate layer for the new feature (View, Model, Controller, or Framework).
    \item Create new classes or extend existing ones as needed, following the established patterns.
    \item Update the UML diagrams to reflect the new components and relationships.
    \item Add appropriate logging using the Logger class.
    \item Update the documentation to include the new feature.
\end{enumerate}

\section{Coding Standards}
When contributing to the Budget Analyser, follow these coding standards:

\begin{itemize}
    \item Use PEP 8 style guidelines for Python code.
    \item Use meaningful variable and function names.
    \item Add docstrings to all classes and methods.
    \item Include appropriate logging statements.
    \item Write unit tests for new functionality.
\end{itemize}

\chapter{Future Enhancements}

Based on the planning document, several potential enhancements could be added to the Budget Analyser in future versions:

\section{Planned Features}

\subsection{Predictive Budgeting}
Implement predictive models to forecast future spending based on historical data and create alerts when expenses are projected to exceed the budget.

\subsection{Savings Goal Tracker}
Add functionality to set and track long-term savings goals, visualize progress, and suggest monthly savings contributions based on current spending patterns.

\subsection{Bill Payment Reminders}
Create a reminder system for bill payments with automated notifications and analyze historical data to predict upcoming bills.

\subsection{Credit Card and Loan Management}
Add features to track credit card usage and payments, display interest accrued, and suggest payoff strategies to minimize interest payments.

\subsection{Investment and Net Worth Tracker}
Implement functionality to track investments and calculate overall net worth, with performance comparison to market benchmarks.

\subsection{Mobile Integration}
Develop a mobile app or bot where users can input expenses or view budget summaries on the go, with cloud synchronization.

\chapter{Troubleshooting}

\section{Common Issues}

\subsection{Login Issues}
If you're having trouble logging in:
\begin{itemize}
    \item Ensure you're using the correct password (default: "password").
    \item Restart the application and try again.
\end{itemize}

\subsection{Data Processing Issues}
If the application is not processing data correctly:
\begin{itemize}
    \item Ensure your statement files are in the expected format.
    \item Check the logs for error messages.
    \item Verify that the mapping files are correctly configured.
\end{itemize}

\subsection{UI Issues}
If you're experiencing UI problems:
\begin{itemize}
    \item Ensure you have the required PyQt6 version installed.
    \item Check that all resource files are in the correct locations.
    \item Restart the application to refresh the UI.
\end{itemize}

\section{Getting Help}
If you need additional help with the Budget Analyser:
\begin{itemize}
    \item Check the documentation for guidance.
    \item Look for error messages in the application logs.
    \item Contact the development team for support.
\end{itemize}

\chapter{Conclusion}

\section{Summary}
The Budget Analyser is a powerful tool for analyzing financial data, providing insights into spending patterns, and helping users make informed financial decisions. With its intuitive interface, automatic categorization, and detailed reporting, it simplifies the process of managing personal or business finances.

\section{Feedback and Contributions}
The Budget Analyser is an evolving project, and feedback and contributions are welcome. If you have suggestions for improvements or would like to contribute to the development, please contact the development team or submit pull requests to the repository.

\appendix

\chapter{UML Diagrams}

\section{Class Diagram}
The class diagram shows the structure of the Budget Analyser application, including the main classes, their attributes and methods, and the relationships between them.

The class diagram is defined in the \texttt{class\_diagram.puml} file located in the \texttt{documentation/uml/} directory. To generate a visual representation of this diagram, you can use one of the following methods:

\begin{enumerate}
    \item \textbf{Online PlantUML Server}:
    \begin{itemize}
        \item Visit \url{https://www.plantuml.com/plantuml/uml/}
        \item Copy and paste the content of \texttt{class\_diagram.puml} into the text area
        \item The diagram will be generated automatically
    \end{itemize}
    
    \item \textbf{Using PlantUML locally}:
    \begin{itemize}
        \item Install PlantUML (requires Java): \url{https://plantuml.com/starting}
        \item Run the command: \texttt{java -jar plantuml.jar class\_diagram.puml}
        \item This will generate a PNG image in the same directory
    \end{itemize}
    
    \item \textbf{Using an IDE Plugin}:
    \begin{itemize}
        \item Many IDEs (IntelliJ, VS Code, etc.) have PlantUML plugins
        \item Install the plugin and open the \texttt{.puml} file to view the diagram
    \end{itemize}
\end{enumerate}

The diagram illustrates the following key components and their relationships:
\begin{itemize}
    \item \textbf{View Layer}: Ui\_Widget, Ui\_MainWindow, InputDisplayApp, ExpenseReport
    \item \textbf{Model Layer}: Statements, OriginalStatement, StatementFormatter
    \item \textbf{Controller Layer}: Report, Processor
    \item \textbf{Framework Layer}: Logger, PandasToolkit, JsonHandler
\end{itemize}

\section{Sequence Diagrams}
The sequence diagrams show the dynamic behavior of the Budget Analyser application, illustrating how objects interact with each other over time to accomplish specific tasks. Two sequence diagrams have been created:

\begin{enumerate}
    \item \textbf{Data Processing Flow}: Shows how data flows through the system during the processing of financial transactions.
    \item \textbf{UI Flow}: Shows how the user interacts with the application's user interface components.
\end{enumerate}

The sequence diagrams are defined in the \texttt{data\_processing\_sequence.puml} and \texttt{ui\_flow\_sequence.puml} files located in the \texttt{documentation/uml/} directory. To generate visual representations of these diagrams, you can use the same methods as for the class diagram:

\begin{enumerate}
    \item \textbf{Online PlantUML Server}:
    \begin{itemize}
        \item Visit \url{https://www.plantuml.com/plantuml/uml/}
        \item Copy and paste the content of the \texttt{.puml} file into the text area
        \item The diagram will be generated automatically
    \end{itemize}
    
    \item \textbf{Using PlantUML locally}:
    \begin{itemize}
        \item Install PlantUML (requires Java): \url{https://plantuml.com/starting}
        \item Run the command: \texttt{java -jar plantuml.jar filename.puml}
        \item This will generate a PNG image in the same directory
    \end{itemize}
    
    \item \textbf{Using an IDE Plugin}:
    \begin{itemize}
        \item Many IDEs (IntelliJ, VS Code, etc.) have PlantUML plugins
        \item Install the plugin and open the \texttt{.puml} file to view the diagram
    \end{itemize}
\end{enumerate}

\subsection{Data Processing Flow Sequence Diagram}
The Data Processing Flow sequence diagram illustrates:
\begin{itemize}
    \item How the application processes financial transaction data
    \item The interactions between main\_be, Statements, Processor, and Report components
    \item How raw transaction data is collected, processed, and used to generate reports
    \item The role of the Logger in recording operations throughout the process
    \item The monthly grouping and reporting process
\end{itemize}

\subsection{UI Flow Sequence Diagram}
The UI Flow sequence diagram illustrates:
\begin{itemize}
    \item The login process and authentication flow
    \item How the dashboard is displayed after successful login
    \item Navigation between different pages of the application
    \item The user's interaction with various UI components
    \item The logout process
\end{itemize}

\chapter{API Reference}

\section{Model API}

\subsection{Statements}
\begin{lstlisting}
class Statements:
    def __init__(self):
        # Initialize the Statements object
        
    def collect_transactions(self):
        # Collect transactions from various sources
        
    @staticmethod
    def future_method():
        # Placeholder for future functionality
\end{lstlisting}

\subsection{OriginalStatement}
\begin{lstlisting}
class OriginalStatement:
    def __init__(self):
        # Initialize the OriginalStatement object
        self.from_credit_cards = ...
        self.from_checking_accounts = ...
\end{lstlisting}

\subsection{StatementFormatter}
\begin{lstlisting}
class StatementFormatter:
    def __init__(self, account_name, statement):
        # Initialize the StatementFormatter object
        self.account_name = account_name
        self.statement = statement
        
    def get_desired_format(self):
        # Format the statement into the desired format
\end{lstlisting}

\section{Controller API}

\subsection{Report}
\begin{lstlisting}
class Report:
    def __init__(self, statement):
        # Initialize the Report object
        self.statement = statement
        
    def earnings(self):
        # Generate earnings report
        
    def expenses(self):
        # Generate expenses report
        
    def expenses_category(self):
        # Generate expenses by category report
        
    def expenses_sub_category(self):
        # Generate expenses by sub-category report
\end{lstlisting}

\subsection{Processor}
\begin{lstlisting}
class Processor:
    def __init__(self, raw_transactions):
        # Initialize the Processor object
        self.__raw_transactions = raw_transactions
        self.processed_transactions = None
        
    def process_transactions(self):
        # Process the raw transactions
        
    def _add_sub_category(self):
        # Add sub-category to transactions
        
    def _add_category(self):
        # Add category to transactions
        
    def _add_c_or_d(self):
        # Add credit or debit indicator
        
    @staticmethod
    def mapper(content, hash_map):
        # Map content using the hash map
\end{lstlisting}

\section{Framework API}

\subsection{Logger}
\begin{lstlisting}
class Logger:
    _instance = None
    _initialized = False
    
    @staticmethod
    def debug(message):
        # Log debug message
        
    @staticmethod
    def info(message):
        # Log info message
        
    @staticmethod
    def error(message):
        # Log error message
        
    @staticmethod
    def critical(message):
        # Log critical message
        
    @staticmethod
    def exception(message):
        # Log exception message
        
    @staticmethod
    def table(table, header):
        # Log tabular data
        
    @staticmethod
    def __get_logger():
        # Get the logger instance
        
    @staticmethod
    def __log(level, tag, message):
        # Log a message with the specified level and tag
        
    @staticmethod
    def get_tag_info(frame_index):
        # Get tag information from the call stack
\end{lstlisting}

\subsection{PandasToolkit}
\begin{lstlisting}
class PandasToolkit:
    @staticmethod
    def filter_rows(df, column_name, condition):
        # Filter DataFrame rows based on condition
        
    @staticmethod
    def add_column(df, column_name, source_column, func):
        # Add a new column to the DataFrame
        
    @staticmethod
    def concat_dataframes(df1, df2):
        # Concatenate two DataFrames
\end{lstlisting}

\subsection{JsonHandler}
\begin{lstlisting}
class JsonHandler:
    def __init__(self, file_path):
        # Initialize the JsonHandler object
        self.file_path = file_path
        self.data = None
\end{lstlisting}

\end{document}